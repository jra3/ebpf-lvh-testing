[
  {
    "name": "bpf-test",
    "packages": [
      "bpftool",
      "libbpf-dev",
      "build-essential",
      "make",
      "clang",
      "llvm",
      "linux-tools-generic",
      "linux-headers-generic",
      "iproute2",
      "util-linux",
      "mount",
      "bash",
      "coreutils"
    ],
    "rootfs_size": "4G",
    "actions": [
      {
        "comment": "Enable kernel features for BPF testing",
        "op": "set-kernel-config",
        "config": [
          "CONFIG_BPF=y",
          "CONFIG_BPF_SYSCALL=y",
          "CONFIG_BPF_JIT=y",
          "CONFIG_HAVE_EBPF_JIT=y",
          "CONFIG_BPF_EVENTS=y",
          "CONFIG_KPROBES=y",
          "CONFIG_KPROBE_EVENTS=y",
          "CONFIG_ARCH_SUPPORTS_KPROBES=y",
          "CONFIG_TRACING=y",
          "CONFIG_FTRACE=y",
          "CONFIG_DEBUG_INFO_BTF=y"
        ]
      }
    ]
  }
]